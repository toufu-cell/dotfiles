# Global OpenCode Instructions

このファイルは全てのOpenCodeセッションに適用される個人的なルールと設定を定義します。

## 言語設定

- **レスポンス言語**: 日本語
- **説明スタイル**: 明確で簡潔に、必要に応じて詳細を提供
- **技術用語**: 英語の技術用語をそのまま使用し、必要に応じて日本語で補足

## コーディングスタイル

### インデント
- **基本**: 4スペースを使用
- タブ文字は使用しない
- エディタの設定と一貫性を保つ

### 命名規則
- **変数・関数**: camelCase (例: `getUserData`, `isValid`)
- **クラス**: PascalCase (例: `UserService`, `DataManager`)
- **定数**: UPPER_SNAKE_CASE (例: `MAX_RETRY_COUNT`, `API_BASE_URL`)
- **ファイル名**: kebab-case または PascalCase (プロジェクトの規約に従う)

### コードの品質
- 明確で読みやすいコードを優先
- 適切なコメントを追加（複雑なロジックや意図が不明瞭な箇所）
- DRY原則（Don't Repeat Yourself）を意識
- 関数は単一責任の原則に従う

## 開発ワークフロー

### Git
- コミットメッセージは明確に（何を、なぜ変更したか）
- 小さく頻繁にコミット
- ブランチ名は説明的に（例: `feature/user-auth`, `fix/api-timeout`）

### エラーハンドリング
- 適切なエラーハンドリングを実装
- エラーメッセージはユーザーフレンドリーに
- ログ出力は開発とプロダクションで適切に分ける

## AI アシスタントへの期待

### レスポンス形式
- 説明は段階的に、必要に応じてコード例を含める
- 大きな変更の前に計画を提示
- セキュリティやパフォーマンスの懸念点があれば指摘

### コード生成
- 既存のプロジェクト構造とスタイルに従う
- 適切なエラーハンドリングを含める
- 必要に応じてテストコードも提案

## LSP連携

OpenCodeはLanguage Server Protocol (LSP)と自動連携します。

### 対応言語
- ファイル拡張子に基づいて自動検出
- 30以上の言語をサポート（Lua, Bash, TypeScript, Python, Go, Rustなど）
- 各言語のLSPサーバーは必要に応じて自動ダウンロード・起動

### 設定
- **グローバル設定**: `~/.config/opencode/opencode.json`
- デフォルトで全LSPサーバーが有効
- LSP診断情報がAIのコード生成・修正に活用される
- 特定のLSPサーバーを無効化したい場合は設定ファイルでカスタマイズ可能

### LSP Tool（実験的機能）
AIがLSP診断情報に直接アクセスするための専用ツールです。

**有効化方法:**
- 環境変数: `OPENCODE_EXPERIMENTAL=true` (全実験的機能を有効化)
- 設定ファイル: `opencode.json`の`tools`セクションに`"lsp": true`を追加

**利用可能な操作:**
- `goToDefinition`: 定義へジャンプ
- `findReferences`: 参照を検索
- `hover`: ホバー情報を取得
- `documentSymbol`: ドキュメント内のシンボル一覧
- `workspaceSymbol`: ワークスペース内のシンボル検索
- `goToImplementation`: 実装へジャンプ
- `prepareCallHierarchy`: 呼び出し階層を準備
- `incomingCalls`: 呼び出し元を取得
- `outgoingCalls`: 呼び出し先を取得

**注意事項:**
- この機能は実験的であり、予告なく変更される可能性があります
- 環境変数が設定されていない場合、LSP toolは利用できません

### 動作
- ファイルを開くと、対応するLSPサーバーが自動起動
- 構文エラー、型エラーなどの診断情報をリアルタイムで取得
- AIがこれらの情報を活用してより正確なコード提案を生成
- LSP toolが有効な場合、AIは定義ジャンプや参照検索などの高度な操作が可能

---

## カスタマイズ用セクション

以下のセクションは必要に応じて追加・編集してください。

### よく使う技術スタック
<!-- 例:
- フロントエンド: React, Next.js
- バックエンド: Node.js, Express
- データベース: PostgreSQL, Redis
- インフラ: Docker, AWS
-->

### プロジェクト固有のルール
<!-- プロジェクト横断的に適用したいルールを記述 -->

### 個人的な好み
<!-- その他の個人的な開発の好みや注意点 -->
